#!/bin/bash

#---VERSION INFO----
DATE=$(date +"%Y%m%d%H%M")
VERSION="Version 2.0.0"
mkdir ~/Desktop/ItemsToDelete

DIRECTORY=$(cd `dirname .` && pwd)

#----Official Move Loop Script, no cmd-line args
echo ${VERSION}
echo Developed by: Luke Milius

##--Lists the filenames to search for, space delimited. --#
ARGS="mackeeper zeobit mplayerx vsearch justcloud zipcloud palmall cleanmymac searchprotect kromtech genieo flashmall macvax installmac cinemas omnibar"
echo finding: ${ARGS} in Applications and Libraries

##--Find all associated files that contain the given arguments and print them to the screen --##
for malware in $ARGS
do
echo Searching Applications based on: ${malware}
find /Applications -maxdepth 1 -iname "*${malware}*" -print >> ~/Desktop/ItemsToDelete/files.txt
done

echo Searching Libraries...	
find ~ /Library /System/Library \( -iname "*mackeeper*" -o -iname "*zeobit*" -o -iname "*mplayerx*" -o -iname "*vsearch*" -o -iname "*justcloud*" -o -iname "*zipcloud*" -o -iname "*palmall*" -o -iname "*cleanmymac*" -o -iname "*searchprotect*" -o -iname "*kromtech*" -o -iname "*genieo*" -o -iname "*flashmall*" -o -iname "*macvax*" -o -iname "*installmac*" -o -iname "*cinemas*" -o -iname "*omnibar*" \) -print >> ~/Desktop/ItemsToDelete/files.txt

awk '!a[$0]++' ~/Desktop/ItemsToDelete/files.txt >> ~/Desktop/ItemsToDelete/filesToDelete.txt
cat ~/Desktop/ItemsToDelete/filesToDelete.txt


##--Confirm that you really want to remove these files from their current directory--##
echo "Do you wish to remove these files?"
select yn in "Yes" "No"; do
	case $yn in
		Yes ) break;;
		No ) mv ~/Desktop/ItemsToDelete/files.txt ~/Desktop/ItemsToDelete/filesNO_$DATE.txt; mv ~/Desktop/ItemsToDelete/filesToDelete.txt ~/Desktop/ItemsToDelete/filesToDeleteNO_$DATE.txt;  exit;;
	esac
done

##--Command that actually moves the files to the folder created on the desktop --##
cat ~/Desktop/ItemsToDelete/filesToDelete.txt | sed 's/.*/"&"/' | xargs -I{} mv -vf "{}" ~/Desktop/ItemsToDelete

mv ~/Desktop/ItemsToDelete/files.txt ~/Desktop/ItemsToDelete/files_$DATE.txt
mv ~/Desktop/ItemsToDelete/filesToDelete.txt ~/Desktop/ItemsToDelete/filesToDelete_$DATE.txt
echo Files Removed!
exit

#------

