#!/bin/bash

#---VERSION INFO----
DATE=$(date +"%Y%m%d%H%M")
VERSION="Version 2.0.7"
mkdir ~/Desktop/ItemsToDelete

DIRECTORY=$(cd `dirname .` && pwd)

#----Official Move Loop Script, no cmd-line args
echo ${VERSION}
echo Developed by: Luke Milius

##--Lists the filenames to search for, space delimited. --#
ARGS="codec-m yontoo chatzum conduit mybrand trovi searchtab omnibar savekeep vidx walletbee toppy updatedownloader cleanmymac macwarrior macreviver mediadownloader mackeeper zeobit mplayer vsearch justcloud zipcloud palmall searchprotect kromtech genieo flashmall macvax installmac cinemas cinemapro sophos omnibar searchme tuneupmymac adwaremedic installmc thesafemac crossrider K9-optimizer K9-MacOptimizer duckduckgo zeospace"
echo finding: ${ARGS} in Applications and Libraries

##--Find all associated files that contain the given arguments and print them to the screen --##
for malware in $ARGS
do
echo Searching Applications based on: ${malware}
find /Applications -maxdepth 1 -iname "*${malware}*" -print >> ~/Desktop/ItemsToDelete/files.txt
done


for last in $ARGS; do true; done
echo Searching Libraries...	
string=""
for malware in $ARGS do
if [ "$malware" != "$last" ] 
then
  string=$string"-iname *${malware}* -o "
else
  string=$string"-iname *${malware}*"
fi
done
find ~ /Library /System/Library $string -print >> ~/Desktop/ItemsToDelete/files.txt

awk '!a[$0]++' ~/Desktop/ItemsToDelete/files.txt >> ~/Desktop/ItemsToDelete/filesToDelete.txt
cat ~/Desktop/ItemsToDelete/filesToDelete.txt


##--Confirm that you really want to remove these files from their current directory--##
echo "Do you wish to remove these files?"
select yn in "Yes" "No"; do
	case $yn in
		Yes ) break;;
		No ) mv ~/Desktop/ItemsToDelete/files.txt ~/Desktop/ItemsToDelete/filesNO_$DATE.txt; mv ~/Desktop/ItemsToDelete/filesToDelete.txt ~/Desktop/ItemsToDelete/filesToDeleteNO_$DATE.txt;  exit;;
	esac
done

##--Command that actually moves the files to the folder created on the desktop --##
cat ~/Desktop/ItemsToDelete/filesToDelete.txt | sed 's/.*/"&"/' | xargs -I{} mv -vf "{}" ~/Desktop/ItemsToDelete

mv ~/Desktop/ItemsToDelete/files.txt ~/Desktop/ItemsToDelete/files_$DATE.txt
mv ~/Desktop/ItemsToDelete/filesToDelete.txt ~/Desktop/ItemsToDelete/filesToDelete_$DATE.txt
echo Files Removed!
exit

#------
